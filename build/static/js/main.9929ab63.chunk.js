(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{18:function(e,n,t){e.exports=t(43)},24:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(16),o=t.n(c),u=t(1),i=t(3),l=t(4);var f=t(6),s=t.n(f),m=t(17),b=function(e){var n=e.newName,t=e.newPhone,r=e.onNameChange,c=e.onPhoneChange,o=e.onSubmitHandler;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"add new"),a.a.createElement("form",{onSubmit:o},a.a.createElement("div",null,a.a.createElement("span",null,"name:"),a.a.createElement("input",{value:n,onChange:r})),a.a.createElement("div",null,a.a.createElement("span",null,"phone:"),a.a.createElement("input",{value:t,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},h=function(e){var n=e.text,t=void 0===n?"click":n,r=e.handler;return a.a.createElement("button",{onClick:r},t)},p=function(e){var n=e.currentPersons,t=e.deletePerson;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Numbers"),a.a.createElement("ul",null,n.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement("p",null,e.name),a.a.createElement("p",null,e.number),a.a.createElement(h,{text:"delete",handler:function(){return t(e.id)}}))}))))},d=function(e){var n=e.onSearchChange;return a.a.createElement("div",null,a.a.createElement("span",null,"Search:"),a.a.createElement("input",{onChange:n}))},O=(t(24),function(e){var n=e.isError,t=e.isShown,r=e.message;return t?a.a.createElement("div",{className:"notification "+(n?"notification_error":"notification_success")},r):null}),E=t(5),j=t.n(E),v=j.a.create({baseURL:"/api/persons"}),g=function(){return v.get().then((function(e){return e.data}))},w=function(e){return v.post("",e).then((function(e){return e.data}))},P=function(e){return v.put("/".concat(e.id),e).then((function(e){return e.data}))},S=function(e){return v.delete("/".concat(e)).then((function(e){return e.data})).catch((function(e){throw e}))};function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var C=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),f=Object(u.a)(o,2),h=f[0],E=f[1],j=Object(r.useState)(""),v=Object(u.a)(j,2),C=v[0],k=v[1],D=Object(r.useState)(Object(i.a)(t)),x=Object(u.a)(D,2),N=x[0],F=x[1],L=Object(r.useState)(!1),H=Object(u.a)(L,2),J=H[0],_=H[1],A=Object(r.useState)(!1),B=Object(u.a)(A,2),I=B[0],R=B[1],T=Object(r.useState)(""),U=Object(u.a)(T,2),q=U[0],z=U[1];Object(r.useEffect)((function(){g().then((function(e){return c(Object(i.a)(e))}))}),[]),Object(r.useEffect)((function(){F(Object(i.a)(t))}),[t]);var G=function(e){return new Promise((function(n){z(e),R(!0),setTimeout((function(){R(!1),n()}),3e3)}))},K=function(){E(""),k("")};return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(O,{isShown:I,isError:J,message:q}),a.a.createElement(d,{onSearchChange:function(e){var n=e.target.value;if(n){var r=t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>=0}));F(Object(i.a)(r))}else F(Object(i.a)(t))}}),a.a.createElement(b,{newName:h,newPhone:C,onNameChange:function(e){E(e.target.value)},onPhoneChange:function(e){k(e.target.value)},onSubmitHandler:function(e){if(e.preventDefault(),t.some((function(e){return e.name===h}))){if(window.confirm("Do you want to change number for ".concat(h,"?"))){var n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(t,!0).forEach((function(n){Object(l.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},t.filter((function(e){return e.name===h}))[0],{number:C});P(n).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),G("Changed ".concat(h))}))}}else w({name:h,number:C}).then((function(e){c([].concat(Object(i.a)(t),[e])),G("Added ".concat(h))}));K()}}),a.a.createElement(p,{currentPersons:N,deletePerson:function(e){window.confirm("Delete person with id ".concat(e,"?"))&&S(e).then((function(){var n=t.find((function(n){return n.id===e})).name;c(t.filter((function(n){return n.id!==e}))),G("Deleted ".concat(n))})).catch(function(){var e=Object(m.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,G(n.message);case 3:_(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}}))};t(42);o.a.render(a.a.createElement(C,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.9929ab63.chunk.js.map